# =============================================================================
# Soviet Nuclear Reservoir Stimulation - "Nuclear Explosions for the National Economy"
# =============================================================================
#
# Models the Soviet approach to peaceful nuclear explosions (PNE) for 
# hydrocarbon reservoir stimulation, based on the USSR's extensive program
# from 1965-1988 which conducted 124 nuclear explosions for economic purposes.
#
# Key Soviet Projects:
# - Urta-Bulak (1966): 30 kt, gas well stimulation in Uzbekistan
# - Crater (1971): 15 kt, gas condensate field enhancement  
# - Quartz (1972-1987): Multiple 2-10 kt shots for oil shale retorting
# - Horizon (1982): 7.6 kt, deep gas reservoir stimulation
#
# Soviet Philosophy:
# - Multiple smaller yields (2-30 kt) in contained shots
# - Deep placement (1500-2500m) in productive zones
# - Emphasis on cavity creation and permeability enhancement
# - Less concern about radioactivity than US programs
# - Direct detonation in or near pay zones
#
# =============================================================================

[SIMULATION]
name = soviet_nuclear_stimulation_urta_bulak
description = Soviet 30 kt nuclear explosion for gas well stimulation (Urta-Bulak style)

# Time parameters - explosion and aftermath
start_time = 0.0
end_time = 31536000.0              # 1 year post-detonation
dt_initial = 0.0001                # 100 microseconds - capture shock
dt_min = 1.0e-6                    # 1 microsecond
dt_max = 86400.0                   # 1 day for late-time flow
max_timesteps = 100000

output_frequency = 100
output_format = HDF5
enable_checkpointing = true
checkpoint_frequency = 1000

# Tolerances for extreme conditions
rtol = 1.0e-4                      # Looser for explosion dynamics
atol = 1.0e-6
max_nonlinear_iterations = 200
max_linear_iterations = 10000

# Physics models
fluid_model = SINGLE_COMPONENT      # Natural gas
solid_model = ELASTOPLASTIC         # Rock failure and cavity formation

enable_geomechanics = true
enable_thermal = true               # Critical for vaporization/melting
enable_fractures = true             # Enhanced fracture network
enable_explosion_source = true      # Nuclear yield source term
enable_radiation_transport = false  # Simplified (Soviet approach)
enable_cavity_formation = true      # Rubble chimney creation
adaptive_timestepping = true

[GRID]
# Large domain to capture far-field effects
nx = 200
ny = 200  
nz = 100

# 4 km x 4 km x 2 km domain
Lx = 4000.0
Ly = 4000.0
Lz = 2000.0

use_unstructured = false

# =============================================================================
# Nuclear Explosion Source (Soviet 30 kt design)
# =============================================================================
[EXPLOSION]
yield = 30.0                       # kilotons TNT equivalent
yield_units = kt

# Detonation point (deep in gas-bearing formation)
x = 2000.0                         # Domain center
y = 2000.0
depth = 1500.0                     # 1.5 km depth (typical Soviet placement)

# Energy partition (Soviet contained shot)
thermal_fraction = 0.50            # 50% thermal/radiation (higher than US)
kinetic_fraction = 0.45            # 45% shock/blast
seismic_fraction = 0.05            # 5% seismic (deep + contained)

# Temporal profile
rise_time = 1.0e-6                 # 1 microsecond to peak
duration = 1.0e-3                  # 1 millisecond total energy release

# Peak conditions at detonation point
peak_temperature = 1.0e7           # 10 million K (thermonuclear)
peak_pressure = 1.0e12             # 1 Terapascal
vaporization_radius = 15.0         # 15 m vaporization sphere

[CAVITY]
# Soviet rubble chimney characteristics
formation_model = BUTKOVICH         # Empirical cavity scaling
cavity_radius_scaling = 80.0        # R = 80 * W^(1/3) meters, W in kt
                                    # For 30 kt: R ≈ 248 m

chimney_height_ratio = 3.5          # Height/radius ratio (Soviet observed)
rubble_porosity = 0.35              # 35% (higher than US due to finer fragmentation)
rubble_permeability = 10000.0       # 10 Darcy (mD) - very high
compaction_time = 3600.0            # 1 hour for initial settling

collapse_model = IMMEDIATE          # Soviet shots usually collapsed quickly
bulking_factor = 1.25               # 25% volume increase in rubble

# =============================================================================
# Reservoir Properties (Urta-Bulak gas field, Uzbekistan)
# =============================================================================
[ROCK]
# Pre-shot formation properties
porosity = 0.12                     # 12% - tight gas sand
permeability_x = 0.5                # 0.5 mD - very low (why stimulation needed)
permeability_y = 0.5
permeability_z = 0.1

density = 2400.0                    # kg/m³
compressibility = 5.0e-10           # 1/Pa

# Elastic properties
youngs_modulus = 25.0e9             # 25 GPa
poissons_ratio = 0.25
shear_modulus = 10.0e9              # 10 GPa
bulk_modulus = 16.7e9               # 16.7 GPa

# Thermal properties  
thermal_conductivity = 2.5          # W/(m·K)
specific_heat = 800.0               # J/(kg·K)
thermal_expansion = 1.0e-5          # 1/K

# Failure criteria (for cavity formation)
tensile_strength = 5.0e6            # 5 MPa
cohesion = 10.0e6                   # 10 MPa
friction_angle = 30.0               # degrees
dilation_angle = 10.0               # degrees

# Post-explosion enhanced zone (0-500m from cavity)
enhanced_permeability_factor = 100.0  # 100x increase
enhanced_porosity_increase = 0.05     # +5% absolute

[FLUID]
type = SINGLE_PHASE
fluid_type = NATURAL_GAS

# Gas properties (methane-rich)
density = 200.0                     # kg/m³ at reservoir conditions
viscosity = 0.00002                 # Pa·s (20 microPa·s)
compressibility = 1.0e-8            # 1/Pa (highly compressible)

reference_pressure = 25.0e6         # 25 MPa initial reservoir pressure
reference_temperature = 350.0       # 350 K (77°C)

# Equation of state
gas_constant = 518.0                # J/(kg·K) for natural gas
molecular_weight = 0.019            # kg/mol (mostly methane)

[INITIAL_CONDITIONS]
initial_pressure = 25.0e6           # 25 MPa (high pressure gas)
initial_temperature = 350.0         # 350 K
initial_saturation = 1.0            # 100% gas

# In-situ stress (1.5 km depth)
vertical_stress = 36.0e6            # σv = ρgh = 2400*9.81*1500 = 36 MPa
horizontal_stress_max = 40.0e6      # σH (slight compression)
horizontal_stress_min = 32.0e6      # σh
stress_regime = STRIKE_SLIP         # σH > σv > σh

[BOUNDARY_CONDITIONS]
# Deep boundaries - fixed
bc_z_min_type = DIRICHLET
bc_z_min_displacement = 0.0
bc_z_min_pressure = 25.0e6

# Top boundary - free surface with overburden
bc_z_max_type = NEUMANN
bc_z_max_traction = -36.0e6         # Overburden weight

# Lateral - far field stress
bc_x_min_type = NEUMANN
bc_x_max_type = NEUMANN  
bc_y_min_type = NEUMANN
bc_y_max_type = NEUMANN

[PRODUCTION_WELL]
# Pre-existing vertical well intersecting cavity
name = URTA_BULAK_1
type = PRODUCER
location_type = CAVITY_INTERSECTING

x = 2000.0
y = 2000.0
z_top = 1300.0                      # 200m above detonation
z_bottom = 1700.0                   # 200m below detonation

# Production starts 3 months post-shot (Soviet practice)
start_time = 7776000.0              # 90 days
control_mode = BHP                  # Bottom hole pressure
target_bhp = 5.0e6                  # 5 MPa drawdown
max_rate = 1000000.0                # 1 million m³/day (unrestricted)

[FRACTURE_NETWORK]
# Enhanced fracture network from explosion
enable_enhanced_fractures = true

# Radial fracture pattern (Soviet observations)
num_radial_fractures = 24           # Extensive fracturing
fracture_length = 500.0             # 500 m radial extent
fracture_height = 400.0             # 400 m vertical extent
fracture_aperture = 0.001           # 1 mm (sustained by rubble)
fracture_permeability = 1000.0      # 1 Darcy

# Stress-induced fractures
stress_threshold = 0.8              # Open at 80% of failure stress
fracture_toughness = 1.0e6          # Pa√m

[RADIATION]
# Soviet approach: minimal concern for radioactivity
enable_radiation_tracking = false   # Not modeled in detail
containment_verification = false    # Soviets less stringent

# Observed Soviet practices
tritium_monitoring = false          # Not routinely measured
fission_products = CONTAINED        # Generally stayed in cavity

# Note: Soviet "Program 7" prioritized economic benefit over
# environmental concerns. Urta-Bulak well was producing for decades.

[OUTPUT]
output_variables = PRESSURE, TEMPERATURE, DISPLACEMENT, STRESS, DAMAGE, POROSITY, PERMEABILITY
output_cavity_evolution = true
output_fracture_network = true
output_production_history = true

# Time snapshots
snapshot_times = 0.0, 0.001, 0.01, 0.1, 1.0, 3600.0, 86400.0, 604800.0, 2592000.0, 7776000.0, 31536000.0
# (t=0, 1ms, 10ms, 100ms, 1s, 1hr, 1day, 1week, 1month, 3months, 1year)

[ANALYSIS]
# Post-shot effectiveness metrics
compute_stimulation_ratio = true    # Gas production increase
compute_cavity_volume = true
compute_permeability_enhancement = true
compute_drainage_radius = true

# Expected Soviet-style results:
# - Cavity volume: ~60,000 m³ (hemisphere + chimney)
# - Production increase: 5-10x pre-shot
# - Enhanced drainage radius: ~500 m
# - Economic lifetime: 20+ years
