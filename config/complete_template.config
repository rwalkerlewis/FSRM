# ==============================================================================
# FSRM Complete Configuration Template
# ==============================================================================
# 
# This template contains ALL available configuration options for FSRM.
# Copy this file and modify as needed for your simulation.
#
# Documentation: docs/CONFIGURATION.md
# ==============================================================================

# ==============================================================================
# [SIMULATION] - Core Simulation Parameters
# ==============================================================================
[SIMULATION]

# Simulation identification
name = complete_template

# Time stepping
start_time = 0.0                    # Simulation start time (s)
end_time = 86400.0                  # Simulation end time (s)
dt_initial = 3600.0                 # Initial timestep (s)
dt_min = 1.0                        # Minimum timestep (s)
dt_max = 86400.0                    # Maximum timestep (s)
adaptive_dt = true                  # Enable adaptive timestepping

# Physics models
# Fluid: SINGLE_COMPONENT, BLACK_OIL, COMPOSITIONAL, BRINE, CO2
fluid_model = SINGLE_COMPONENT

# Solid: ELASTIC, VISCOELASTIC, POROELASTIC, ELASTOPLASTIC, VTI, HTI
solid_model = ELASTIC

# Physics coupling flags
enable_geomechanics = false         # Enable geomechanics
enable_thermal = false              # Enable thermal effects
enable_fractures = false            # Enable fracture modeling
enable_faults = false               # Enable fault mechanics
enable_elastodynamics = false       # Enable elastic waves
enable_poroelastodynamics = false   # Enable poroelastic waves

# Solver settings
rtol = 1.0e-6                       # Relative tolerance
atol = 1.0e-8                       # Absolute tolerance
max_nonlinear_iterations = 50       # Max SNES iterations
max_linear_iterations = 1000        # Max KSP iterations
solver_type = gmres                 # Linear solver: gmres, cg, bicgstab
preconditioner = ilu                # Preconditioner: ilu, jacobi, asm, hypre

# GPU acceleration
use_gpu = false                     # Enable GPU
gpu_mode = CPU_FALLBACK             # GPU_ONLY, CPU_FALLBACK, AUTO
gpu_device_id = 0                   # GPU device index
gpu_memory_fraction = 0.8           # Max GPU memory fraction

# ==============================================================================
# [GRID] - Domain and Mesh Configuration
# ==============================================================================
[GRID]

# Grid dimensions
nx = 20                             # Cells in X direction
ny = 20                             # Cells in Y direction
nz = 10                             # Cells in Z direction

# Domain size (meters)
Lx = 1000.0                         # Domain length X
Ly = 1000.0                         # Domain length Y
Lz = 100.0                          # Domain length Z

# Domain origin (meters)
origin_x = 0.0                      # Origin X
origin_y = 0.0                      # Origin Y
origin_z = 0.0                      # Origin Z

# Grid type: CARTESIAN, CORNER_POINT
grid_type = CARTESIAN

# Mesh refinement
refinement_level = 0                # 0 = no refinement

# ==============================================================================
# [ROCK] - Default Rock/Material Properties
# Use [ROCK1], [ROCK2], etc. for heterogeneous materials
# ==============================================================================
[ROCK]

# Constitutive model
# LINEAR_ELASTIC, VISCOELASTIC_MAXWELL, VISCOELASTIC_KELVIN, VISCOELASTIC_SLS,
# POROELASTIC, ELASTOPLASTIC_MC, ELASTOPLASTIC_DP, VTI, HTI
constitutive_model = LINEAR_ELASTIC

# Basic properties
porosity = 0.20                     # Porosity (fraction)
permeability_x = 100.0              # Permeability X (mD)
permeability_y = 100.0              # Permeability Y (mD)
permeability_z = 10.0               # Permeability Z (mD)
density = 2650.0                    # Grain density (kg/m³)
compressibility = 1.0e-9            # Rock compressibility (1/Pa)

# Elastic properties
youngs_modulus = 20.0e9             # Young's modulus (Pa)
poisson_ratio = 0.25                # Poisson's ratio
# Alternative: specify bulk and shear modulus
# bulk_modulus = 13.3e9             # Bulk modulus (Pa)
# shear_modulus = 8.0e9             # Shear modulus (Pa)

# Poroelastic properties (for POROELASTIC model)
biot_coefficient = 1.0              # Biot coefficient (0-1)
biot_modulus = 1.0e10               # Biot modulus M (Pa)
# undrained_poisson = 0.35          # Undrained Poisson ratio
# skempton = 0.9                    # Skempton coefficient

# Viscoelastic properties (for VISCOELASTIC models)
# viscoelastic_type = MAXWELL       # MAXWELL, KELVIN_VOIGT, SLS
# viscosity = 1.0e18                # Viscosity (Pa·s)
# relaxation_time = 1.0e12          # Relaxation time (s)

# Plasticity properties (for ELASTOPLASTIC models)
# failure_criterion = MOHR_COULOMB  # MOHR_COULOMB, DRUCKER_PRAGER
# cohesion = 1.0e6                  # Cohesion (Pa)
# friction_angle = 30.0             # Friction angle (degrees)
# dilation_angle = 0.0              # Dilation angle (degrees)
# tensile_strength = 0.0            # Tensile strength (Pa)

# Anisotropic properties (for VTI/HTI models)
# c11 = 50.0e9                      # Stiffness C11 (Pa)
# c12 = 15.0e9                      # Stiffness C12 (Pa)
# c13 = 12.0e9                      # Stiffness C13 (Pa)
# c33 = 40.0e9                      # Stiffness C33 (Pa)
# c44 = 12.0e9                      # Stiffness C44 (Pa)
# thomsen_epsilon = 0.1             # Thomsen epsilon
# thomsen_delta = 0.05              # Thomsen delta
# thomsen_gamma = 0.08              # Thomsen gamma

# Thermal properties
thermal_conductivity = 2.5          # Thermal conductivity (W/m·K)
specific_heat = 800.0               # Specific heat (J/kg·K)
thermal_expansion = 1.0e-5          # Thermal expansion coefficient (1/K)

# Permeability model
# CONSTANT, KOZENY_CARMAN, EXPONENTIAL, CUBIC_LAW, DYNAMIC
permeability_model = CONSTANT
# permeability_reference = 100.0    # Reference permeability (mD)
# permeability_exponent = 3.0       # Exponent for models

# ==============================================================================
# [FLUID] - Fluid Model Configuration
# ==============================================================================
[FLUID]

# Fluid type
# SINGLE_PHASE, BLACK_OIL, COMPOSITIONAL, BRINE, CO2
type = SINGLE_PHASE

# Common properties
density = 1000.0                    # Reference density (kg/m³)
viscosity = 0.001                   # Viscosity (Pa·s)
compressibility = 4.5e-10           # Compressibility (1/Pa)
reference_pressure = 1.0e5          # Reference pressure (Pa)

# --- Black Oil Properties ---
# oil_density_std = 850.0           # Oil density at std (kg/m³)
# gas_density_std = 0.9             # Gas density at std (kg/m³)
# water_density_std = 1000.0        # Water density at std (kg/m³)
# solution_gor = 100.0              # Solution GOR (scf/stb or sm³/sm³)
# bubble_point = 15.0e6             # Bubble point pressure (Pa)
# pvt_correlation = STANDING        # STANDING, VASQUEZ_BEGGS, GLASO, AL_MARHOUN

# --- Compositional Properties ---
# num_components = 3                # Number of components
# component_names = C1, C3, C7+     # Component names
# critical_temperatures = 190.6, 369.8, 560.0  # Tc (K)
# critical_pressures = 4.6e6, 4.25e6, 2.4e6    # Pc (Pa)
# acentric_factors = 0.011, 0.152, 0.35        # Omega
# molar_weights = 16.04, 44.1, 100.0           # MW (kg/kmol)
# eos_type = PENG_ROBINSON          # PENG_ROBINSON, SRK, VAN_DER_WAALS, IDEAL

# --- Brine Properties ---
# salinity = 50000                  # Salinity (ppm)
# salt_type = NaCl                  # Salt type

# --- CO2 Properties ---
# co2_model = SPAN_WAGNER           # CO2 property model

# ==============================================================================
# [DYNAMICS] - Wave Propagation and Dynamics
# ==============================================================================
[DYNAMICS]

enable = false                      # Enable dynamic simulation

# Wave physics
wave_type = ELASTIC                 # ELASTIC, POROELASTIC, ACOUSTIC
cfl_number = 0.5                    # CFL stability factor

# Absorbing boundaries (PML)
absorbing_layers = 10               # PML thickness in cells
absorbing_strength = 100.0          # PML damping coefficient

# Source parameters
source_type = MOMENT_TENSOR         # MOMENT_TENSOR, POINT_FORCE, EXPLOSIVE, DOUBLE_COUPLE
source_location = 500.0, 500.0, 50.0  # Source x, y, z (m)
source_time_function = RICKER       # RICKER, GAUSSIAN, STEP, CUSTOM
source_frequency = 10.0             # Peak frequency (Hz)
source_amplitude = 1.0              # Source amplitude

# Dynamic permeability
dynamic_permeability = false        # Enable wave-induced permeability changes
# permeability_model = STRAIN       # STRAIN, FREQUENCY

# ==============================================================================
# [SEISMICITY] - Fault Mechanics and Induced Seismicity
# ==============================================================================
[SEISMICITY]

enable = false                      # Enable seismicity analysis

# Friction model
friction_law = COULOMB              # COULOMB, RATE_STATE_AGING, RATE_STATE_SLIP, SLIP_WEAKENING

# Event detection
nucleation_size = 1.0               # Critical patch size (m)
seismic_slip_rate = 1.0e-3          # Seismic slip rate threshold (m/s)

# Statistics
b_value = 1.0                       # Gutenberg-Richter b-value

# Modeling options
aftershocks = true                  # Enable aftershock modeling
stress_transfer = true              # Enable Coulomb stress transfer

# Constraints
max_magnitude = 6.0                 # Maximum allowed magnitude

# Output
catalog_file = output/seismic_catalog.csv  # Seismic event catalog

# ==============================================================================
# [OUTPUT] - Output Configuration
# ==============================================================================
[OUTPUT]

# Output format: VTK, HDF5, ECLIPSE, ASCII
format = VTK

# Output path
path = output

# Output frequency
frequency = 10                      # Output every N timesteps
# time_interval = 3600.0            # Alternative: output every N seconds

# Fields to output
pressure = true
displacement = false
velocity = false
stress = false
strain = false
permeability = false
temperature = false
saturation = false
fault_slip = false
seismic_catalog = false

# ==============================================================================
# [WELL1] - First Well Definition
# Use [WELL2], [WELL3], etc. for additional wells
# ==============================================================================
[WELL1]

name = PROD1                        # Well identifier
type = PRODUCER                     # PRODUCER, INJECTOR, OBSERVATION

# Location (grid indices, 0-based)
i = 10
j = 10
k = 5

# Control
control_mode = BHP                  # RATE, BHP, THP
target_value = 15.0e6               # Target BHP (Pa) or rate (m³/s)

# Constraints
# max_rate = 0.01                   # Maximum rate (m³/s)
# min_bhp = 5.0e6                   # Minimum BHP (Pa)
# max_bhp = 50.0e6                  # Maximum BHP (Pa)

# Well properties
diameter = 0.1                      # Wellbore diameter (m)
skin = 0.0                          # Skin factor
# wellbore_storage = 0.0            # Wellbore storage (m³/Pa)

# For injectors:
# fluid = WATER                     # Injection fluid type
# temperature = 300.0               # Injection temperature (K)

# ==============================================================================
# [WELL2] - Second Well Definition (Example Injector)
# ==============================================================================
[WELL2]

name = INJ1
type = INJECTOR
i = 2
j = 2
k = 5
control_mode = RATE
target_value = 0.001                # 0.001 m³/s
max_bhp = 40.0e6
diameter = 0.1
fluid = WATER

# ==============================================================================
# [FRACTURE1] - First Fracture Definition
# Use [FRACTURE2], etc. for additional fractures
# ==============================================================================
[FRACTURE1]

type = NATURAL                      # NATURAL, HYDRAULIC
location = 500.0, 500.0, 50.0, 0.707, 0.707, 0.0  # x,y,z, nx,ny,nz

# Hydraulic properties
aperture = 0.0001                   # Aperture (m)
permeability = 1.0e-12              # Permeability (m²)

# Geometry (for DFN)
# half_length = 50.0                # Half-length (m)
# height = 20.0                     # Height (m)
# conductivity = 1.0e-14            # Conductivity (m³)

# Propagation (for HYDRAULIC type)
enable_propagation = false
# toughness = 1.0e6                 # Fracture toughness (Pa·√m)
# energy = 100.0                    # Fracture energy (J/m²)

# Proppant (for HYDRAULIC type)
enable_proppant = false
# proppant_density = 2650.0         # Proppant density (kg/m³)
# proppant_diameter = 0.001         # Proppant diameter (m)

# ==============================================================================
# [FAULT1] - First Fault Definition
# Use [FAULT2], etc. for additional faults
# ==============================================================================
[FAULT1]

name = MAIN_FAULT

# Geometry
x = 5000.0                          # Center X (m)
y = 0.0                             # Center Y (m)
z = 3000.0                          # Center depth (m)
strike = 0.0                        # Strike azimuth (degrees from N)
dip = 60.0                          # Dip angle (degrees from horizontal)
length = 2000.0                     # Along-strike length (m)
width = 1000.0                      # Down-dip width (m)
# rake = 0.0                        # Slip direction (degrees)

# Friction model
friction_law = COULOMB              # COULOMB, RATE_STATE_AGING, RATE_STATE_SLIP

# Coulomb parameters
static_friction = 0.6               # Static friction coefficient
dynamic_friction = 0.4              # Dynamic friction coefficient
cohesion = 0.0                      # Cohesion (Pa)

# Rate-state parameters (for RATE_STATE_* laws)
# rate_state_a = 0.01               # Direct effect a
# rate_state_b = 0.015              # Evolution effect b
# rate_state_dc = 1.0e-5            # Critical slip distance Dc (m)
# rate_state_v0 = 1.0e-6            # Reference velocity (m/s)
# rate_state_f0 = 0.6               # Reference friction

# ==============================================================================
# [BC1] - First Boundary Condition
# Use [BC2], [BC3], etc. for additional BCs
# ==============================================================================
[BC1]

type = DIRICHLET                    # DIRICHLET, NEUMANN, ROBIN, PERIODIC, ABSORBING
field = PRESSURE                    # PRESSURE, TEMPERATURE, DISPLACEMENT, SATURATION
location = XMIN                     # XMIN, XMAX, YMIN, YMAX, ZMIN, ZMAX, ALL
value = 20.0e6                      # BC value

# For time-dependent BCs:
# time_function = linear            # constant, linear, step, sinusoidal, table

# ==============================================================================
# [BC2] - Second Boundary Condition
# ==============================================================================
[BC2]

type = NEUMANN
field = PRESSURE
location = XMAX
value = 0.0                         # No-flow boundary

# ==============================================================================
# [IC1] - First Initial Condition
# Use [IC2], etc. for additional ICs
# ==============================================================================
[IC1]

field = PRESSURE                    # Field to initialize
distribution = UNIFORM              # UNIFORM, GRADIENT, FUNCTION, FILE
value = 20.0e6                      # Uniform value (Pa)

# For gradient distribution:
# gradient = 0.0, 0.0, 10000.0      # Gradient vector (Pa/m in x, y, z)

# For file distribution:
# file = initial_pressure.dat       # External data file

# ==============================================================================
# [IC2] - Second Initial Condition
# ==============================================================================
[IC2]

field = TEMPERATURE
distribution = GRADIENT
value = 300.0                       # Surface temperature (K)
gradient = 0.0, 0.0, 0.03           # Geothermal gradient (K/m)

# ==============================================================================
# End of Configuration Template
# ==============================================================================
