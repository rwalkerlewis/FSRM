# Static-to-Dynamic Triggering Configuration
# Quasi-static stress buildup triggers dynamic seismic event
# Models stress-induced seismicity with permeability changes

[SIMULATION]
start_time = 0.0
end_time = 86400.0                    # 1 day
dt_initial = 60.0                     # 1 minute for quasi-static
dt_min = 0.001                        # 1 ms for dynamic event
dt_max = 3600.0                       # 1 hour
max_timesteps = 10000

output_frequency = 10
output_format = HDF5
enable_checkpointing = true
checkpoint_frequency = 100

rtol = 1.0e-6
atol = 1.0e-8
max_nonlinear_iterations = 50
max_linear_iterations = 3000

fluid_model = SINGLE_COMPONENT
solid_model = POROELASTODYNAMIC

enable_geomechanics = true
enable_poroelastodynamics = false
enable_thermal = false
enable_fractures = false
enable_particle_transport = false
enable_faults = true
enable_tidal_forces = false

# Static-to-dynamic triggering mode
use_dynamic_mode = false              # Start in quasi-static mode
use_static_triggering = true          # Enable dynamic triggering
dynamic_trigger_threshold = 5.0e6     # 5 MPa trigger stress
dynamic_event_duration = 10.0         # 10 second dynamic event

# Permeability changes during and after seismic event
enable_dynamic_permeability_change = true
permeability_sensitivity = 2.0        # High sensitivity
permeability_recovery_time = 3600.0   # 1 hour recovery

adaptive_timestepping = true

[GRID]
nx = 60
ny = 60
nz = 30

# Domain: 3 km x 3 km x 1.5 km
Lx = 3000.0
Ly = 3000.0
Lz = 1500.0

use_unstructured = false

[ROCK]
# Basement rock with critically stressed fault
porosity = 0.05                       # 5% porosity
permeability_x = 1.0                  # 1 mD (low)
permeability_y = 1.0
permeability_z = 0.5

compressibility = 1.0e-10

# Mechanical properties
youngs_modulus = 35.0e9               # 35 GPa
poisson_ratio = 0.25
density = 2650.0                      # kg/m³
biot_coefficient = 0.7

# Wave properties (activated during dynamic event)
p_wave_velocity = 5000.0
s_wave_velocity = 2900.0
quality_factor = 100.0

damping_alpha = 0.02
damping_beta = 0.002

# Permeability enhancement from seismic waves
permeability_strain_coeff = 5.0e-7    # Very strong effect
permeability_stress_coeff = 1.0e-15
min_permeability = 0.1                # mD
max_permeability = 100.0              # Can increase 100x!

[FLUID]
# Formation water
density = 1020.0                      # kg/m³ (saline)
viscosity = 0.0008                    # Pa·s
compressibility = 4.0e-10

[WELL1]
# Injection well creating stress perturbation
name = INJECTOR
type = INJECTOR
i = 30
j = 30
k = 20
control_mode = RATE
target_value = 0.05                   # 50 L/s
max_rate = 0.1
min_bhp = 60.0e6                      # 60 MPa maximum
diameter = 0.2
skin = 0.0

[FAULT1]
# Critically stressed fault that can be triggered
name = ACTIVE_FAULT
strike = 1.0, 0.0, 0.0
dip = 0.0, 0.707, 0.707               # 45° dip
length = 2000.0                       # 2 km
width = 1000.0                        # 1 km depth extent
static_friction = 0.6
dynamic_friction = 0.4                # Drops during slip
cohesion = 2.0e6                      # 2 MPa
use_rate_state = true
a_parameter = 0.008
b_parameter = 0.012                   # b > a = unstable
Dc_parameter = 0.001                  # 1 mm

[BC1]
# Far-field pressure
type = DIRICHLET
field = PRESSURE
location = XMIN
value = 30.0e6

[BC2]
type = DIRICHLET
field = PRESSURE
location = XMAX
value = 30.0e6

[BC3]
type = DIRICHLET
field = PRESSURE
location = YMIN
value = 30.0e6

[BC4]
type = DIRICHLET
field = PRESSURE
location = YMAX
value = 30.0e6

[BC5]
# Tectonic stress loading
type = NEUMANN
field = DISPLACEMENT
location = XMIN
value = 0.0
gradient = 45.0e6                     # 45 MPa horizontal stress

[BC6]
type = NEUMANN
field = DISPLACEMENT
location = XMAX
value = 0.0
gradient = -45.0e6

[IC1]
# Initial pressure (hydrostatic)
field = PRESSURE
distribution = GRADIENT
value = 15.0e6                        # 15 MPa at surface
gradient = 0.0, 0.0, 10000.0

[IC2]
# Initial stress state (tectonic)
field = DISPLACEMENT
distribution = UNIFORM
value = 0.0
