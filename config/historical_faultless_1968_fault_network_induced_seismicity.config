# ==============================================================================
# Historical-inspired Example: Faultless (1968) - Fault Network + Induced Seismicity
# ==============================================================================
# Goal:
# - Provide a *Faultless-labeled* configuration with:
#   - simplified site geology (volcanics over basement) via Gmsh physical volumes
#   - a nearby *fault network* (two faults) via Gmsh fault surfaces + [FAULT*] sections
#   - a synthetic "post-shot" stress pulse to trigger a sequence of induced events
#
# Notes:
# - This is an educational representation. It does NOT claim to reproduce the
#   detailed mechanics of the historical event.
# - The "nuclear trigger" is implemented as a transient stress perturbation used
#   to drive the fault network update and IMEX trigger logic.
#
# Mesh:
#   meshes/historical/faultless_1968_site_faults_3d.msh
# Physical volumes:
#   - "volcanics"  (near surface)
#   - "basement"   (faults reside here)
# Physical surfaces (faults):
#   - "fault_main"
#   - "fault_secondary"
# ==============================================================================

[SIMULATION]
name = historical_faultless_1968_fault_network
description = Faultless-inspired fault network + induced seismicity (explosion-integrated trigger)

start_time = 0.0
end_time = 600.0
dt_initial = 0.1
dt_min = 1e-4
dt_max = 1.0
max_timesteps = 200000
output_frequency = 50
output_format = HDF5

# Keep the physics knobs consistent with induced seismicity examples
fluid_model = SINGLE_COMPONENT
solid_model = ELASTIC
enable_geomechanics = true
enable_faults = true
enable_explosion_source = true

# Explosion coupling mode:
# - PROXY: reduced-order trigger/coupling
# - COUPLED_ANALYTIC: integrated analytic coupling (default)
# - FULL_PDE: full coupled blast+shock+wave PDE everywhere (not implemented in this build)
explosion_solve_mode = COUPLED_ANALYTIC

[GRID]
mesh_type = GMSH
mesh_file = meshes/historical/faultless_1968_site_faults_3d.msh
use_unstructured = true

# Map geologic domains
gmsh_material_mapping = volcanics:ROCK_VOLCANICS, basement:ROCK_BASEMENT

# Map fault surfaces to fault models (use split nodes if desired)
gmsh_fault_mapping = fault_main:FAULT1:split, fault_secondary:FAULT2

# Geographic CRS context (approximate central Nevada; for demonstration only)
input_crs = EPSG:4326
model_crs = EPSG:32611
use_local_coordinates = true
local_origin_x = -116.000
local_origin_y = 38.800
local_origin_z = 0.0

# ------------------------------------------------------------------------------
# Materials
# ------------------------------------------------------------------------------
[ROCK_VOLCANICS]
name = Volcanic_Cover
porosity = 0.12
permeability_x = 0.01 mD
permeability_y = 0.01 mD
permeability_z = 0.001 mD
youngs_modulus = 12 GPa
poisson_ratio = 0.28
density = 2300 kg/m3
biot_coefficient = 0.8

[ROCK_BASEMENT]
name = Crystalline_Basement
porosity = 0.02
permeability_x = 0.001 mD
permeability_y = 0.001 mD
permeability_z = 0.0001 mD
youngs_modulus = 55 GPa
poisson_ratio = 0.25
density = 2700 kg/m3
biot_coefficient = 0.6

[FLUID]
type = SINGLE_PHASE
density = 1000 kg/m3
viscosity = 1.0 cP
compressibility = 4.5e-10 1/Pa

# ------------------------------------------------------------------------------
# Fault network (two faults; geometry approximates a local network)
# ------------------------------------------------------------------------------
[FAULT1]
name = FAULTLESS_MAIN
x = 10000.0
y = 10000.0
z = 4500.0
strike = 15.0
dip = 65.0
length = 12000.0
width = 8000.0
friction_law = RATE_STATE_AGING
rate_state_a = 0.010
rate_state_b = 0.016
rate_state_dc = 0.01
rate_state_v0 = 1.0e-9
rate_state_f0 = 0.60
cohesion = 1.0e6

[FAULT2]
name = FAULTLESS_SECONDARY
x = 11000.0
y = 12000.0
z = 5200.0
strike = 45.0
dip = 55.0
length = 8000.0
width = 6000.0
friction_law = RATE_STATE_AGING
rate_state_a = 0.010
rate_state_b = 0.015
rate_state_dc = 0.008
rate_state_v0 = 1.0e-9
rate_state_f0 = 0.58
cohesion = 0.8e6

[SEISMICITY]
enable = true
aftershocks = true
stress_transfer = true
catalog_file = output/faultless_seismic_catalog.csv

# ------------------------------------------------------------------------------
# Explosion source (integrated trigger): transient stress from underground shot
# ------------------------------------------------------------------------------
[EXPLOSION_SOURCE]
type = NUCLEAR_UNDERGROUND
yield_kt = 1.0
depth_of_burial = 975.0
location_x = 10000.0
location_y = 10000.0
location_z = -975.0

# Detonation time (seconds)
onset_time = 20.0

# Cavity/source rise time proxy (seconds)
rise_time = 0.05

# Overpressure at cavity wall proxy (Pa). If omitted, the simulator uses a rough scaling.
cavity_overpressure = 2.0e11

[IMEX]
enabled = true
initial_mode = IMPLICIT
implicit_dt_initial = 0.5
implicit_dt_min = 0.05
implicit_dt_max = 1.0
implicit_method = BEULER

explicit_dt_initial = 1e-3
explicit_dt_min = 1e-4
explicit_dt_max = 5e-3
cfl_factor = 0.5
explicit_method = EULER

trigger_type = COULOMB_FAILURE
coulomb_threshold = 0.0

settling_type = TIME
min_dynamic_duration = 1.0
max_dynamic_duration = 30.0

log_transitions = true
transition_log_file = output/faultless_imex_transitions.log

[OUTPUT]
format = HDF5
path = output/historical_faultless_fault_network
frequency = 50
pressure = true
displacement = true
fault_slip = true
seismic_catalog = true

