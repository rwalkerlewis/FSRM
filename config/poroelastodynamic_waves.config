# Poroelastodynamic Wave Propagation Configuration
# Coupled fluid-solid wave propagation (Biot's equations)
# Includes dynamic permeability changes from transient waves

[SIMULATION]
start_time = 0.0
end_time = 5.0                        # 5 seconds
dt_initial = 0.0001                   # 0.1 ms
dt_min = 0.00001
dt_max = 0.001
max_timesteps = 50000

output_frequency = 100
output_format = HDF5
enable_checkpointing = true
checkpoint_frequency = 500

rtol = 1.0e-6
atol = 1.0e-8
max_nonlinear_iterations = 30
max_linear_iterations = 2000

fluid_model = SINGLE_COMPONENT
solid_model = POROELASTODYNAMIC       # Biot's dynamic theory

enable_geomechanics = true
enable_poroelastodynamics = false     # Already enabled via solid_model
enable_thermal = false
enable_fractures = false
enable_particle_transport = false
enable_faults = false
enable_tidal_forces = false

# Dynamic mode with permeability changes
use_dynamic_mode = true
use_static_triggering = false
adaptive_timestepping = true

# Dynamic permeability changes from waves
enable_dynamic_permeability_change = true
permeability_sensitivity = 1.0
permeability_recovery_time = 100.0    # 100 second recovery

[GRID]
nx = 80
ny = 80
nz = 40

# Domain: 800 m x 800 m x 400 m
Lx = 800.0
Ly = 800.0
Lz = 400.0

use_unstructured = false

[ROCK]
# Sandstone properties (high porosity, fluid-saturated)
porosity = 0.25                       # 25% porosity
permeability_x = 100.0                # 100 mD
permeability_y = 100.0
permeability_z = 50.0                 # Anisotropic

compressibility = 5.0e-10

# Mechanical properties - sandstone
youngs_modulus = 15.0e9               # 15 GPa
poisson_ratio = 0.2
density = 2300.0                      # kg/m³
biot_coefficient = 0.9                # Strong coupling

# Wave properties (Biot waves)
p_wave_velocity = 3500.0              # Fast P-wave (Biot wave I)
s_wave_velocity = 2000.0              # S-wave
quality_factor = 50.0                 # Moderate attenuation

# Rayleigh damping
damping_alpha = 0.01
damping_beta = 0.001

# Dynamic permeability parameters
permeability_strain_coeff = 1.0e-7    # Strong strain dependence
permeability_stress_coeff = 5.0e-16   # Moderate stress dependence
min_permeability = 10.0               # mD
max_permeability = 1000.0             # mD (can increase 10x)

[FLUID]
# Water properties
density = 1000.0                      # kg/m³
viscosity = 0.001                     # Pa·s (1 cP)
compressibility = 4.5e-10             # 1/Pa

[BC1]
# Permeable top boundary
type = DIRICHLET
field = PRESSURE
location = ZMAX
value = 1.0e5                         # 1 bar atmospheric

[BC2]
# Fixed pressure at bottom
type = DIRICHLET
field = PRESSURE
location = ZMIN
value = 4.0e6                         # 40 bar hydrostatic

[BC3]
# Roller boundaries on sides (displacement)
type = NEUMANN
field = DISPLACEMENT
location = XMIN
value = 0.0

[BC4]
type = NEUMANN
field = DISPLACEMENT
location = XMAX
value = 0.0

[BC5]
type = NEUMANN
field = DISPLACEMENT
location = YMIN
value = 0.0

[BC6]
type = NEUMANN
field = DISPLACEMENT
location = YMAX
value = 0.0

[IC1]
# Initial pressure (hydrostatic)
field = PRESSURE
distribution = GRADIENT
value = 1.0e5
gradient = 0.0, 0.0, 10000.0

[IC2]
# Initial displacement
field = DISPLACEMENT
distribution = UNIFORM
value = 0.0
