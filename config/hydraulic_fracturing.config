# Hydraulic Fracturing Example
# Fracture propagation with proppant transport

[SIMULATION]
name = hydraulic_fracturing
start_time = 0.0
end_time = 7200.0               # 2 hours
dt_initial = 10.0               # 10 seconds
dt_min = 1.0
dt_max = 60.0
fluid_model = SINGLE_COMPONENT
solid_model = ELASTIC
enable_geomechanics = true
enable_thermal = false
enable_fractures = true
enable_faults = false
rtol = 1.0e-6
atol = 1.0e-8
max_nonlinear_iterations = 100

[GRID]
nx = 40
ny = 40
nz = 20
Lx = 400.0                      # 400 m
Ly = 400.0
Lz = 100.0

[ROCK]
constitutive_model = LINEAR_ELASTIC
porosity = 0.10
permeability_x = 0.1            # 0.1 mD (tight)
permeability_y = 0.1
permeability_z = 0.01
density = 2500.0
compressibility = 1.0e-10
youngs_modulus = 30.0e9         # 30 GPa
poisson_ratio = 0.25
tensile_strength = 5.0e6        # 5 MPa

[FLUID]
type = SINGLE_PHASE
density = 1020.0                # Frac fluid
viscosity = 0.050               # 50 cP (crosslinked gel)
compressibility = 4.0e-10

[WELL1]
name = FRAC_WELL
type = INJECTOR
i = 20                          # Center
j = 20
k = 10
control_mode = RATE
target_value = 0.05             # 0.05 m³/s (~20 bpm)
max_bhp = 60.0e6
diameter = 0.1

[FRACTURE1]
type = HYDRAULIC
location = 200.0, 200.0, 50.0, 0.0, 1.0, 0.0  # Center, E-W orientation
aperture = 0.001
permeability = 1.0e-8           # High conductivity
toughness = 1.5e6               # Pa·√m
energy = 150.0                  # J/m²
enable_propagation = true
enable_proppant = true
proppant_density = 2650.0       # Sand
proppant_diameter = 0.0005      # 0.5 mm

[IC1]
field = PRESSURE
distribution = GRADIENT
value = 25.0e6                  # Reservoir pressure
gradient = 0, 0, 10000          # Hydrostatic

[BC1]
type = DIRICHLET
field = DISPLACEMENT
location = XMIN
value = 0.0

[BC2]
type = DIRICHLET
field = DISPLACEMENT
location = XMAX
value = 0.0

[BC3]
type = DIRICHLET
field = DISPLACEMENT
location = YMIN
value = 0.0

[BC4]
type = DIRICHLET
field = DISPLACEMENT
location = YMAX
value = 0.0

[BC5]
type = DIRICHLET
field = DISPLACEMENT
location = ZMIN
value = 0.0

[BC6]
type = NEUMANN
field = DISPLACEMENT
location = ZMAX
value = 0.0                     # Free surface

[OUTPUT]
format = VTK
path = output/hydraulic_fracturing
frequency = 10
pressure = true
displacement = true
stress = true
permeability = true
