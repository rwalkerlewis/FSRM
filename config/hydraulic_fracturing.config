# Hydraulic Fracturing Configuration
# Complete frac job with proppant transport

[SIMULATION]
start_time = 0.0
end_time = 7200.0                     # 2 hours
dt_initial = 10.0                     # 10 seconds
dt_min = 1.0
dt_max = 60.0
max_timesteps = 1000

output_frequency = 20
output_format = VTK
enable_checkpointing = true
checkpoint_frequency = 50

rtol = 1.0e-6
atol = 1.0e-8
max_nonlinear_iterations = 100
max_linear_iterations = 3000

fluid_model = SINGLE_COMPONENT
solid_model = ELASTIC

enable_geomechanics = true
enable_thermal = false
enable_fractures = true               # Critical
enable_particle_transport = true      # Proppant
enable_faults = false
enable_tidal_forces = false
adaptive_timestepping = true

[GRID]
nx = 60
ny = 60
nz = 20
Lx = 600.0                            # 600m x 600m x 100m
Ly = 600.0
Lz = 100.0
use_unstructured = false

[ROCK]
# Shale formation
porosity = 0.05
permeability_x = 0.0001               # 0.1 microDarcy
permeability_y = 0.0001
permeability_z = 0.00001

compressibility = 5.0e-10

youngs_modulus = 25.0e9               # 25 GPa (stiff shale)
poisson_ratio = 0.20
density = 2400.0
biot_coefficient = 0.7

relaxation_time = 1.0e10
viscosity = 1.0e25

thermal_conductivity = 1.8
heat_capacity = 800.0
thermal_expansion = 8.0e-6

fracture_toughness = 0.8e6            # Pa·m^0.5
fracture_energy = 50.0                # J/m²

[FLUID]
# Frac fluid (slickwater)
density = 1000.0                      # kg/m³
viscosity = 0.001                     # Pa·s (low viscosity)
compressibility = 4.5e-10

oil_density_std = 1000.0
gas_density_std = 0.0
water_density_std = 1000.0

oil_viscosity = 0.001
gas_viscosity = 0.00001
water_viscosity = 0.001

solution_GOR = 0.0

[FRACTURE1]
# Main hydraulic fracture
type = HYDRAULIC
location = 300.0, 300.0, 50.0, 0.0, 1.0, 0.0  # Center, E-W orientation
aperture = 0.005                      # 5mm initial
permeability = 1.0e-9                 # From cubic law
toughness = 0.8e6                     # Pa·m^0.5
energy = 50.0                         # J/m²
enable_propagation = true
enable_proppant = true

[PARTICLE]
# Ceramic proppant (40/70 mesh)
diameter = 0.0003                     # 300 microns
density = 2650.0                      # kg/m³
concentration = 0.0                   # kg/m³ (varies during pumping)
diffusivity = 1.0e-9
enable_settling = true
enable_bridging = true                # Important for proppant

[WELL1]
# Injection well (treatment)
name = FRAC_WELL
type = INJECTOR
i = 30
j = 30
k = 10
control_mode = RATE
target_value = 0.05                   # 50 L/s = 20 bpm
max_rate = 0.1
min_bhp = 70.0e6                      # 70 MPa max
diameter = 0.15                       # 6 inch
skin = 0.0

[BC1]
# Far-field pressure
type = DIRICHLET
field = PRESSURE
location = XMIN
value = 30.0e6                        # 30 MPa

[BC2]
type = DIRICHLET
field = PRESSURE
location = XMAX
value = 30.0e6

[BC3]
type = DIRICHLET
field = PRESSURE
location = YMIN
value = 30.0e6

[BC4]
type = DIRICHLET
field = PRESSURE
location = YMAX
value = 30.0e6

[BC5]
# Overburden stress
type = NEUMANN
field = DISPLACEMENT
location = ZMAX
value = 0.0
gradient = -50.0e6                    # 50 MPa vertical stress

[BC6]
# No displacement at bottom
type = DIRICHLET
field = DISPLACEMENT
location = ZMIN
value = 0.0

[IC1]
# Initial reservoir pressure
field = PRESSURE
distribution = UNIFORM
value = 30.0e6                        # 30 MPa
gradient = 0.0, 0.0, 0.0

[IC2]
# Initial stress state
field = DISPLACEMENT
distribution = UNIFORM
value = 0.0
gradient = 0.0, 0.0, 0.0
