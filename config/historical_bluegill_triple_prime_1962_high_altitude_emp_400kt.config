# ==============================================================================
# Historical-inspired Example: BLUEGILL TRIPLE PRIME (Operation Dominic / Fishbowl, 1962)
# ==============================================================================
# Purpose:
# - Provide an additional Fishbowl-series style high-altitude configuration.
# - This example sits between "lower high-alt" and "very high-alt" cases:
#   emphasizing how EMP footprint + ionization effects depend on burst altitude.
#
# Notes (important):
# - Educational, historical-inspired scenario (not an authoritative reconstruction).
# - Parameters are chosen to be consistent with the rest of the example suite.
# - For a larger-yield, extreme-altitude baseline, see:
#   - config/historical_starfish_prime_1962_high_altitude_emp.config
# ==============================================================================

[SIMULATION]
name = historical_bluegill_triple_prime_1962_emp
description = Bluegill-Triple-Prime-inspired ~400 kt medium/high-altitude burst (EMP + ionization)

start_time = 0.0
end_time = 120.0

dt_initial = 1.0e-8
dt_min = 1.0e-10
dt_max = 0.05

adaptive_dt = true
output_frequency = 200
output_format = HDF5
enable_checkpointing = true
checkpoint_frequency = 10000

fluid_model = COMPRESSIBLE_NS
solid_model = ELASTODYNAMIC

enable_atmosphere = true
enable_electromagnetic = true
enable_ionization = true
enable_radiation = true
enable_thermal = true

coupling_mode = LOOSELY_COUPLED
atmosphere_ground_coupling = false
radiation_thermal_coupling = true
emp_ionization_coupling = true

use_gpu = true
gpu_mode = AUTO

# ------------------------------------------------------------------------------
# Geography (Johnston Atoll region) + local coordinates
# ------------------------------------------------------------------------------
[GRID]
# Keep same domain as other Dominic configs for easy comparisons.
nx = 320
ny = 320
nz = 240
Lx = 500000.0
Ly = 500000.0
Lz = 500000.0
origin_x = 0.0
origin_y = 0.0
origin_z = 0.0

input_crs = EPSG:4326
model_crs = EPSG:32602
use_local_coordinates = true
local_origin_x = -169.53
local_origin_y = 16.74
local_origin_z = 0.0

# ==============================================================================
# Device
# ==============================================================================
[NUCLEAR_DEVICE]
type = THERMONUCLEAR
yield_kt = 400.0
fission_fraction = 0.35

# "Medium/high" altitude within Fishbowl-style scenarios
# Representative ~50 km burst height to contrast with ~95 km and ~400 km cases.
burst_height = 48000.0
location_x = 250000.0
location_y = 250000.0
location_z = 48000.0

# ==============================================================================
# Atmosphere / Ionosphere
# ==============================================================================
[ATMOSPHERE]
model = EXTENDED
base_profile = US_STANDARD_1976
ground_level = 0.0
top_of_domain = 500000.0
num_layers = 80
layer_type = EXPONENTIAL

[ATMOSPHERE.WIND]
enable_wind = false

[IONOSPHERE]
enabled = true
background_model = IRI
daytime = true
D_layer_altitude = 60000.0
E_layer_altitude = 120000.0
F_layer_altitude = 300000.0
xray_ionization = true
enhanced_ionization_duration = 3600.0
compute_radio_blackout = true
frequency_cutoff = 30.0e6

# ==============================================================================
# EMP
# ==============================================================================
[ELECTROMAGNETIC_PULSE]
enabled = true
source_mechanism = COMPTON_CURRENT

[EMP.E1]
enabled = true
pulse_type = FAST
rise_time = 2.5e-9
decay_time = 1.0e-6

# Medium altitude can concentrate fields locally; keep peak below Starfish.
peak_field = 25000.0

gamma_emission_time = 100.0e-9
gamma_fluence = 1.8e13
compton_electron_energy = 1.0
geomagnetic_field = 50.0e-6
geomagnetic_dip = 60.0
source_region_altitude = 25000.0
atmosphere_conductivity_profile = EXPONENTIAL

[EMP.E2]
enabled = true
pulse_type = INTERMEDIATE
rise_time = 1.0e-6
duration = 1.0e-3
peak_field = 250.0

[EMP.E3]
enabled = true
pulse_type = SLOW
rise_time = 0.5
duration = 120.0
peak_field = 2.5
fireball_conductivity = 1.0e6
magnetic_field_distortion = true

# ==============================================================================
# Radiation (simplified)
# ==============================================================================
[RADIATION_TRANSPORT]
enabled = true
method = MONTE_CARLO
num_particles = 1500000

[RADIATION_TRANSPORT.PROMPT]
enabled = true
gamma_yield_fraction = 0.006
neutron_yield_fraction = 0.003

# ==============================================================================
# Receivers
# ==============================================================================
[RECEIVERS]
output_format = HDF5
sampling_rate = 20000.0

# Two orthogonal lines to illustrate footprint anisotropy effects
[RECEIVER_ARRAY_EMP_EW]
type = LINE
start = 250000.0, 250000.0, 10.0
end = 450000.0, 250000.0, 10.0
num_stations = 32
fields = electric_field_x, electric_field_y, electric_field_z, magnetic_field

[RECEIVER_ARRAY_EMP_NS]
type = LINE
start = 250000.0, 250000.0, 10.0
end = 250000.0, 450000.0, 10.0
num_stations = 32
fields = electric_field_x, electric_field_y, electric_field_z, magnetic_field

# ==============================================================================
# Output
# ==============================================================================
[OUTPUT]
format = HDF5
path = output/historical_bluegill_triple_prime_emp

save_electric_field = true
save_magnetic_field = true
save_induced_current = true
save_dose_rate = true
save_temperature = true

volume_output_frequency = 500
surface_output_frequency = 100
