# ==============================================================================
# Historical-inspired Example: Starfish Prime (1962) - High-Altitude EMP Context
# ==============================================================================
# This config is a "historical label + geography" wrapper around the existing
# high-altitude EMP-dominant nuclear burst example. It adds explicit site
# coordinates (Johnson Atoll region) and a consistent naming convention.
#
# For the full set of EMP/ionosphere knobs, compare with:
#   - config/atmospheric_nuclear_test_high_altitude_emp_1400kt.config
# ==============================================================================

[SIMULATION]
name = historical_starfish_prime_1962_emp
description = Starfish-Prime-inspired 1.4 Mt high-altitude EMP scenario (geographic context)

start_time = 0.0
end_time = 120.0
dt_initial = 1.0e-8
dt_min = 1.0e-10
dt_max = 0.05

adaptive_dt = true
output_frequency = 200
output_format = HDF5
enable_checkpointing = true
checkpoint_frequency = 10000

fluid_model = COMPRESSIBLE_NS
solid_model = ELASTODYNAMIC

enable_atmosphere = true
enable_electromagnetic = true
enable_ionization = true
enable_radiation = true
enable_thermal = true

coupling_mode = LOOSELY_COUPLED
atmosphere_ground_coupling = false
radiation_thermal_coupling = true
emp_ionization_coupling = true

use_gpu = true
gpu_mode = AUTO

# ------------------------------------------------------------------------------
# Geography: burst location in WGS84 (lon/lat) + local origin
# ------------------------------------------------------------------------------
[GRID]
# Use a large regional domain (meters). Coordinates are in the model CRS.
nx = 320
ny = 320
nz = 240
Lx = 500000.0
Ly = 500000.0
Lz = 500000.0
origin_x = 0.0
origin_y = 0.0
origin_z = 0.0

input_crs = EPSG:4326
model_crs = EPSG:32602
use_local_coordinates = true
local_origin_x = -169.53
local_origin_y = 16.74
local_origin_z = 0.0

[NUCLEAR_DEVICE]
type = THERMONUCLEAR
yield_kt = 1400.0
fission_fraction = 0.25

# High altitude burst (meters above sea level, in model coordinates)
burst_height = 400000.0
location_x = 250000.0
location_y = 250000.0
location_z = 400000.0

[ATMOSPHERE]
model = EXTENDED
base_profile = US_STANDARD_1976
ground_level = 0.0
top_of_domain = 500000.0
num_layers = 80
layer_type = EXPONENTIAL

[ATMOSPHERE.WIND]
enable_wind = false

[ELECTROMAGNETIC_PULSE]
enabled = true
source_mechanism = COMPTON_CURRENT

[EMP.E1]
enabled = true
pulse_type = FAST
rise_time = 2.5e-9
decay_time = 1.0e-6
peak_field = 50000.0
gamma_emission_time = 100.0e-9
gamma_fluence = 5.0e13
compton_electron_energy = 1.0
geomagnetic_field = 50.0e-6
geomagnetic_dip = 60.0
source_region_altitude = 30000.0
atmosphere_conductivity_profile = EXPONENTIAL

[EMP.E2]
enabled = true
pulse_type = INTERMEDIATE
rise_time = 1.0e-6
duration = 1.0e-3
peak_field = 500.0

[EMP.E3]
enabled = true
pulse_type = SLOW
rise_time = 0.5
duration = 120.0
peak_field = 5.0
fireball_conductivity = 1.0e6
magnetic_field_distortion = true

[IONOSPHERE]
enabled = true
background_model = IRI
daytime = true
D_layer_altitude = 60000.0
E_layer_altitude = 120000.0
F_layer_altitude = 300000.0
xray_ionization = true
enhanced_ionization_duration = 7200.0
compute_radio_blackout = true
frequency_cutoff = 30.0e6

[OUTPUT]
format = HDF5
path = output/historical_starfish_prime_emp

save_electric_field = true
save_magnetic_field = true
save_induced_current = true
save_dose_rate = true
save_temperature = true

volume_output_frequency = 500
surface_output_frequency = 100

