# GPU-Accelerated Elastodynamics Wave Propagation Configuration
# This example demonstrates GPU acceleration for seismic wave simulation
# Expect 30-50x speedup on NVIDIA A100 vs 8-core CPU

[SIMULATION]
start_time = 0.0
end_time = 10.0               # 10 seconds of wave propagation
dt_initial = 0.0001           # 0.1 ms timestep for stability
dt_min = 1e-6
dt_max = 0.001

# GPU Configuration
use_gpu = true
gpu_mode = CPU_FALLBACK       # Use GPU if available, fallback to CPU
gpu_device_id = 0             # Select GPU device (0 = first GPU)
gpu_verbose = true            # Print GPU performance info
gpu_memory_fraction = 0.85    # Use 85% of GPU memory

# GPU Solver Options
use_gpu_preconditioner = true
use_gpu_matrix_assembly = true
pin_host_memory = true        # Faster CPU-GPU transfers

# Time stepping
enable_adaptive_timestepping = true
max_timesteps = 100000

# Output
output_frequency = 100        # Write output every 100 steps
output_format = HDF5                  # HDF5 (default), VTK (secondary)
checkpointing = true
checkpoint_frequency = 1000

# Solver tolerances
rtol = 1e-6
atol = 1e-8
max_nonlinear_iterations = 20
max_linear_iterations = 500

# Physics
fluid_model = SINGLE_COMPONENT
solid_model = ELASTODYNAMIC
enable_elastodynamics = true
use_dynamic_mode = true

[GRID]
nx = 200
ny = 200
nz = 100
Lx = 1000.0    # 1 km
Ly = 1000.0    # 1 km
Lz = 500.0     # 500 m

[ROCK]
# Granite properties
porosity = 0.01
permeability_x = 1e-18        # 0.001 mD (very tight)
permeability_y = 1e-18
permeability_z = 1e-18

# Elastic properties
youngs_modulus = 50.0e9       # 50 GPa
poisson_ratio = 0.25
density = 2700.0              # kg/mÂ³

# Wave propagation properties
p_wave_velocity = 5500.0      # m/s
s_wave_velocity = 3200.0      # m/s
damping_alpha = 0.01          # Rayleigh damping
damping_beta = 0.0001
quality_factor = 100.0        # Seismic Q

[INITIAL_CONDITION]
# Point source at center
source_type = POINT_FORCE
source_location = 500, 500, 250  # Center of domain
source_amplitude = 1.0e6      # 1 MN force
source_frequency = 10.0       # 10 Hz
source_duration = 0.5         # 0.5 second pulse

[BOUNDARY_CONDITIONS]
# Absorbing boundaries (PML)
xmin_type = ABSORBING
xmax_type = ABSORBING
ymin_type = ABSORBING
ymax_type = ABSORBING
zmin_type = FREE_SURFACE
zmax_type = ABSORBING
pml_width = 20                # 20 cells

[OUTPUT]
fields = displacement,velocity,stress,strain
save_seismograms = true
seismogram_locations = 250,250,0; 500,250,0; 750,250,0  # Array of receivers
